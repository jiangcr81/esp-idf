<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>MAT Control</title>
</head>
<script>
function led_set()
{
	var id_set = document.getElementById("mat_id_set_input").value;
	
	var led_v = 0;
	//*
	var led_value_1 = document.getElementById("led1").checked;
	var led_value_2 = document.getElementById("led2").checked;
	var led_value_3 = document.getElementById("led3").checked;
	var led_value_4 = document.getElementById("led4").checked;

	if(led_value_1 == true)
	{
		led_v |= 0x11;
	}
	else
	{
		led_v &= 0xFE;
		led_v |= 0x10;
	}
	
	if(led_value_2 == true)
	{
		led_v |= 0x22;
	}
	else
	{
		led_v &= 0xFD;
		led_v |= 0x20;
	}
	
	if(led_value_3 == true)
	{
		led_v |= 0x44;
	}
	else
	{
		led_v &= 0xFB;
		led_v |= 0x40;
	}
	
	if(led_value_4 == true)
	{
		led_v |= 0x88;
	}
	else
	{
		led_v &= 0xF7;
		led_v |= 0x80;
	}
//	alert(led_v);
	//*/
	if (id_set.length == 0)
	{
		alert("Please input ID first!");
	}
	else
	{
		
		var param = "mat_id="+id_set+"&led_value="+led_v;
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (xhttp.readyState == 4) {
                if (xhttp.status == 200) {
                    document.open();
                    document.write(xhttp.responseText);
                    document.close();
                } else if (xhttp.status == 0) {
                    alert("Server closed the connection abruptly!");
                    location.reload()
                } else {
                    alert(xhttp.status + " Error!\n" + xhttp.responseText);
                    location.reload()
                }
            }
		}
		
		xhttp.open("POST", "mat/set_led", true);
        xhttp.send(param);
	}
}

function lcd_show()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	var lcd_str = document.getElementById("lcd_str").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=161"+"&lcd_num="+lcd_num+"&lcd_str="+lcd_str;
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}

function lcd_show2()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	var lcd_str = document.getElementById("lcd_str_weight").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=162"+"&lcd_num="+lcd_num+"&lcd_str="+lcd_str;
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}

function lcd_show3()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	var lcd_str = document.getElementById("lcd_str_qty").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=163"+"&lcd_num="+lcd_num+"&lcd_str="+lcd_str;
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}

function lcd_show4()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=164"+"&lcd_num="+lcd_num+"&lcd_mode=0&bg_mode=1";
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}

function lcd_show5()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=164"+"&lcd_num="+lcd_num+"&lcd_mode=1&bg_mode=1";
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}

function lcd_show6()
{
	var mat_id = document.getElementById("mat_id_set_input").value;
	var lcd_num = document.getElementById("lcd_num").value;
	
	var param = "mat_id="+mat_id+"&lcd_type=164"+"&lcd_num="+lcd_num+"&lcd_mode=0&bg_mode=0";
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState == 4) {
			if (xhttp.status == 200) {
				document.open();
				document.write(xhttp.responseText);
				document.close();
			} else if (xhttp.status == 0) {
				alert("Server closed the connection abruptly!");
				location.reload()
			} else {
				alert(xhttp.status + " Error!\n" + xhttp.responseText);
				location.reload()
			}
		}
	}
	
	xhttp.open("POST", "mat/set_lcd", true);
	xhttp.send(param);

}
</script>
<body>
<h1 align="center">Welcome to MAT Control Page</h1>
<p>
  <label>Mat ID:
  <input type="text" id="mat_id_set_input" size="4" maxlength="4" />
  <!--<button type="button" onclick="led_set()">Set</button>-->
  </label>
</p>
<table width="100%" border="1">
  <tr>
    <td><p>1</p>
    <p>
      <label>
      <input id="led1" type="checkbox" name="checkbox" value="1" onclick="led_set()" />
      Led      </label>
    </p>
    
    
    </td>
    <td><p>2</p>
    <p>
      <label>
      <input id="led2" type="checkbox" name="checkbox" value="2" onclick="led_set()"/>
      Led
      </label>
    </p></td>
	<td><p>3</p>
    <p>
      <label>
      <input id="led3" type="checkbox" name="checkbox" value="3" onclick="led_set()"/>
      Led
      </label>
    </p></td>
	<td><p>4</p>
    <p>
      <label>
      <input id="led4" type="checkbox" name="checkbox" value="4" onclick="led_set()"/>
      Led
      </label>
    </p></td>
  </tr>
</table>

<p>
<select id="lcd_num" name="select" class="style_select" >
  <option value="1">LCD 1</option>
  <option value="2">LCD 2</option>
  <option value="3">LCD 3</option>
  <option value="4">LCD 4</option>
  <option value="5">LCD 5</option>
  <option value="6">LCD 6</option>
  <option value="7">LCD 7</option>
  <option value="8">LCD 8</option>
</select>
</p>
<p>PartNumber:
      <input name="textfield" type="text" id="lcd_str" size="30" maxlength="30" />
</p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show()">Lcd Show Part Number</button> </p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show4()">Show Part Number as Charactor</button> </p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show5()">Show Part Number as BarCode</button> </p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show6()">Set LCD backlight Off</button> </p>

<p>Input Weight:
      <input name="textfield" type="text" id="lcd_str_weight" size="30" maxlength="30" />
</p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show2()">Lcd Show Weight</button> </p>

<p>Input Quality:
      <input name="textfield" type="text" id="lcd_str_qty" size="30" maxlength="30" />
</p>
<p> <button id="mat_id_set" type="button" onclick="lcd_show3()">Lcd Show Quality</button> </p>
</body>
</html>
